{% extends "common/base.html" %}
{% load humanize i18n bootstrap4 %}
{% load arrival_tags %}

{% block navbar %} {% include  'common/navbar.html'%}{% endblock navbar %}
{% block sidebar%} {% include  'common/sidebar.html'%}{% endblock sidebar %}
{% block message %} {% include "common/message.html" %} {% endblock message %}

{% block main %}
    {% include 'common/modal/_modal.html' %}
<div class="col-md-12 col-lg-12 card-col">       
    <div class="card card-default">
        <div class="card-body">
            <table class="table table-bordered xs-data-table">
                <thead class="thead-dark">
                    <tr>
                    <a href="{% url 'arrival:arrival_create' %}">
                    <button class="btn btn-primary btn-md add-button-cls">
                        {% trans "Add Part Arrival" %}
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                    </a>
                        <th>{% trans "Customer Name" %}</th>
                        <th>{% trans "RO & RE Number" %}</th>
                        <th>{% trans "Description" %}</th>
                        <th>{% trans "Remarks" %}</th>
                        <th>{% trans "Date Arrival" %}</th>
                        <th>{% trans "Actions" %}</th>
                    </tr>
                </thead>
                <tbody>

                         {% for arrival in page_obj.object_list  %}
                    <tr>
                        <td>{{ arrival.customer_name }}</a></b></td>
                        <td>{{ arrival.ro_number }}</td>
                        <td>{{ arrival.partnumber.description}}</td>
                        <!-- TODO: Fix this using templatetag-->
                        <td>
                            {% remark_status arrival.remarks %}
                        </td>
                        <td>{{ arrival.date_arrival}}</td>
                     {% if user.is_staff and arrival.remarks == 'COMPLETED' %}
                        <td><a href="{% url 'arrival:arrival_edit' pk=arrival.id %}" 
                        class="btn btn-primary btn-xs edit-users disabled">
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                        </a>
                    {% else %}
                        <td><a href="{% url 'arrival:arrival_edit' pk=arrival.id %}" 
                        class="btn btn-primary btn-xs edit-users">
                            <i class="fa fa-pencil" aria-hidden="true"></i>
                        </a> 
                    {% endif %}
                        <a data-id="{% url 'arrival:arrival-read' pk=arrival.id %}" 
                        class="btn btn-success btn-xs read-arrival" 
                        data-toggle="modal" data-target="#modal">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                        </a>
                        
                        <a data-id="{% url 'arrival:arrival-read' pk=arrival.id %}" 
                        class="btn btn-warning btn-xs download-arrival" 
                        data-toggle="modal" data-target="#modal">
                            <i class="fa fa-download" aria-hidden="true"></i>
                        </a>
                    </tr>
                          {% empty %}
                            <p class="font-weight-bold">{% trans "No parts arrival has been added try adding" %} 
                            <a href="{% url 'arrival:arrival_create' %}">{% trans "here" %}</a></p>
                            <p class="mb-0"></p>
                {% endfor %}
                </tbody>
            </table>
        <div>
    </div>
</div>
{% include 'common/paginator.html' %}
{% endblock main %}
